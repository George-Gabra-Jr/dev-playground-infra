http:
  middlewares:
    error-pages-middleware:
      errors:
        service: error-pages
        query: /{status}.html
    rate-limiter-middleware:
      rateLimit:
        average: 100
        burst: 200
    circuit-breaker-middleware:
      circuitBreaker:
        expression: LatencyAtQuantileMS(50.0)>100
    compression-middleware:
      compress:
        excludedContentTypes: text/event-stream
    retry-middleware:
      retry:
        attempts: 4
        initialInterval: 100ms
    size-limiter-middleware:
      buffering:
        maxRequestBodyBytes: 2000000
    default-middlewares:
      chain:
        middlewares:
          - error-pages-middleware
          - rate-limiter-middleware
          - circuit-breaker-middleware
          - compression-middleware
          - retry-middleware
          - size-limiter-middleware

  routers:
    default:
      middlewares:
        - default-middlewares